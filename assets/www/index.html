<!DOCTYPE html>
<html class="ui-mobile-rendering">
<head>
	<title>YesWeScore</title>
	<meta name="viewport" content="user-scalable=no,width=device-width" />
	
	
	<link rel="stylesheet" href="styles/jquery.mobile-1.2.0.min.css">
	<link rel="stylesheet" href="styles/main.css">		 
	 
	<script type="text/javascript">
		// windows phone 8 BOOTSTRAP
		/*try {
			console.log = function(str){ window.external.Notify(str); };
		} catch (e) {
			window.external.Notify("exception: "+e);
		}
		window.onerror=function(e, url, lineNumber)
		{
			console.log("ERROR! : " +url + "(" + lineNumber + ") : " + JSON.stringify(e));
		};
		*/
		
		// patch bug cordova 2.4.
		var prompt = function (strA, strB) { console.log("prompt: " + strB + strA); };
		
		// clearing local storage on start.
		localStorage.clear();
		
		// can we dump somewhere ? (DEV ONLY);
		try {
			if (window && window.external) {
				window.external.Notify("HERE");
				console.log = function(str){ window.external.Notify(str) };
			}
		} catch (e) { window.external.Notify("error:" + e); }
		console.log = function(str){ window.external.Notify(str) };
		console.log("Installed console ! ");
	</script>

    <script type="text/javascript" src="scripts/cordova-2.4.0.js"></script> 
    
  	<!-- JQuery -->
	<script type="text/javascript" src="scripts/jquery.min.js"></script>
	
  	<!-- Config -->	
  
	<script type="text/javascript" src="js/jqm-config.js"></script>  
  	<script type="text/javascript" src="js/app-config.js"></script>	
	
	<!-- Libraries -->  
	<script type="text/javascript" src="scripts/jquery.mobile-1.2.0.min.js"></script>
	 
	<script type="text/javascript" src="scripts/lodash.min.js"></script>
	<script type="text/javascript" src="scripts/backbone-min.js"></script>

	<script type="text/javascript" src="scripts/backbone.offline.js"></script>
	
	<script type="text/javascript" src="scripts/backbone.poller.min.js"></script>
	  
  	<!-- Core -->	
  	<script type="text/javascript" src="js/models/config.js"></script>
  	<script type="text/javascript" src="js/models/game.js"></script>
  	<script type="text/javascript" src="js/models/stream.js"></script>  	
  	<script type="text/javascript" src="js/models/player.js"></script>
  	<script type="text/javascript" src="js/models/club.js"></script>  	
  	<script type="text/javascript" src="js/models/version.js"></script> 
	 	   	
  	<script type="text/javascript" src="js/collections/games.js"></script>
  	<script type="text/javascript" src="js/collections/players.js"></script>	
  	<script type="text/javascript" src="js/collections/clubs.js"></script>    	
     
    <!-- Views -->
    <script type="text/javascript" src="js/views/account.js"></script> 
	<script type="text/javascript" src="js/views/club.js"></script> 
	<script type="text/javascript" src="js/views/game.js"></script> 
	<script type="text/javascript" src="js/views/gameadd.js"></script> 
	<script type="text/javascript" src="js/views/gameend.js"></script> 
	<script type="text/javascript" src="js/views/gamefollow.js"></script> 	
	<script type="text/javascript" src="js/views/gamelist.js"></script> 	
	<script type="text/javascript" src="js/views/index.js"></script> 
	<script type="text/javascript" src="js/views/player.js"></script> 
	<script type="text/javascript" src="js/views/playerfollow.js"></script>	
	<script type="text/javascript" src="js/views/playerform.js"></script> 
	<script type="text/javascript" src="js/views/playerlist.js"></script> 
	<script type="text/javascript" src="js/views/playersignin.js"></script> 
    <script type="text/javascript" src="js/views/index.js"></script>
    <script type="text/javascript" src="js/views/game.js"></script>
    <script type="text/javascript" src="js/tools.js"></script>
    <script type="text/javascript" src="js/main.js"></script>

</head>
<body>

<div id="index" data-role="page">
</div>

<!-- TEMPLATE START -->

<script  id="accountViewTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back">Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">

<a href="#games/me/<%= Owner.id %>" data-role="button" id="">Mes Matchs</a>
<a href="#games/follow" data-role="button" id="">Matchs Suivis</a>
<a href="#players/follow" data-role="button" id="">Joueurs Suivis</a>


<% 

if(Owner.mail === '') 
	print ('<a href="#players/form" data-role="button" id="">Inscription</a>'); 
else 
	print ('<a href="#players/form" data-role="button" id="">Profil</a>');
	
%>

<a href="#players/signin" data-role="button" id="">Charger un autre compte</a>
<br/>
<br/>
<a id="debug" data-role="button">Debug</a>


</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account" class="ui-btn-active ui-state-persist">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="accountViewTemplateGOOD" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back">Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">

<a href="#games/me/<%= Owner.id %>" data-role="button" id="">Mes Matchs</a>
<a href="#games/follow" data-role="button" id="">Matchs Suivis</a>
<a href="#players/follow" data-role="button" id="">Joueurs Suivis</a>
<% 

if(Owner.club.id !== "") 
	print ('<a href="#" data-role="button" id="" class="ui-disabled">Mon Club</a>'); 
else 
	print ('<a href="#clubs/'+Owner.club.id+'" data-role="button" id="">Mon Club</a>');
	
%>
<!-- 
<a href="#" data-role="button" id="" class="ui-disabled">Mon Coach Sportif</a>
 -->
<a href="#" data-role="button" id="" class="ui-disabled">Calcul Classement</a>

<p align="center">Vos donn&eacute;es sont enregistr&eacute;es en local. Pour les sauver, cliquez sur :</p>
<!-- Parametres -->
<% 

if(Owner.mail === '') 
	print ('<a href="#players/form" data-role="button" id="">Inscription</a>'); 
else 
	print ('<a href="#players/form" data-role="button" id="">Profil</a>');
	
%>

<a href="#players/signin" data-role="button" id="">Charger un autre compte</a>
<br/>
<br/>
<a id="debug" data-role="button">Debug</a>


</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account" class="ui-btn-active ui-state-persist">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="clubListAutoCompleteViewTemplate" type="text/template">
<% if(clubs.length==0) { %>
        <li><p>Aucun resultat pour <%= query %></p></li>
<% } %> 

<%

    for (var i = 0; i < clubs.length; i++) {
    	
    	club = clubs[i];
    
    %>
        
        <li title="<% if (club!==undefined) print(club.id); %>">
        
       <fieldset data-role="controlgroup" data-type="horizontal">
       <input type="checkbox" name="club_choice" value="<% if (club!==undefined) print(club.id); %>" id="club_choice" class="custom" />
       <label for="club_name"><% if (club!==undefined) print(club.name); %> - </label>
       <label for="club_city"><% if (club!==undefined) print(club.city); %></label>
       </fieldset>
      
        </li>
    <%
    	if (i>5) break;
    
        }
        
        if (clubs.length>5) {
     %>
      <li>
     	... ( <%= clubs.length %> resultats)
        </li>
     <%   
        }
%>
</script>


<script  id="clubListViewTemplate" type="text/template">
<% if(clubs.length==0) { %>
        <li><p>Aucun club <%= query %></p></li>
<% } %> 

<%
    for (var i = 0; i < clubs.length; i++) {
    	
    	clubs = clubs[i];
    
    %>
        <li>
        <a data-transition="slide">
        <%= club.name %> : <%= club.city %> : <%= club.id %>  
		<br/>
        </a>
        </li>
    <%
        }
%>
</script>


<script  id="clubViewTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back">Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">
<h3><%= club.name %></h3>
Sport : <%= club.sport %>&nbsp;&nbsp;&nbsp;&nbsp;City : <%= club.location.city %><br/>
FFTID : <%= club.fftid %>
Site :&nbsp;&nbsp;&nbsp;&nbsp;Facebook :<br/>

<a href="#players/club/<%= club.id %>" data-role="button" id="listPlayer">Liste des joueurs</a>
<a href="#games/club/<%= club.id %>" data-role="button" id="lastResult">Dernier resultat</a>
<a id="followButton" data-role="button">Suivre</a>

</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="gameAddTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back" >
    Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">
   
<form id="frmAddGame" class="ui-body ui-body-b ui-corner-all">

  <span class="success label label-info hide" style="color:red"></span>	
  
  <div class="control-group">
    <div class="controls">
      <button type="submit" value="Save" class="button">Save</button>
    </div>
  </div>
  
  <div data-role="fieldcontain">
 	<fieldset data-role="controlgroup" id="click_myself">
		<input type="checkbox" name="myself" id="myself" class="custom" />
		<label for="myself">* Joueur 1 - S'il s'agit de vous, cochez ici</label>
    </fieldset>
  </div>

  <div class="control-group">
    <div class="controls">
      <input type="text" id="team1" name="team1" placeholder="Joueur 1" class='input-xlarge' value="Vincent"/>
      <input type="text" id="rank1" name="rank1" placeholder="Classement 1" class='input-xlarge' value="15/5"/>   
      <ul id="team1_suggestions" data-role="listview" data-inset="true"></ul>
      <input type='hidden' id='team1_id' class='input' value='' />
      <span class="team1_error label label-info hide"></span>
    </div>
  </div>
  
  <div data-role="fieldcontain">
 	<fieldset data-role="controlgroup">
		<label for="autosearch">* Joueur 2 - Indiquez au moins 4 lettres</label>
    </fieldset>
  </div>  
  
  <div class="control-group">
    <div class="controls">
      <input type="text" id="team2" name="team2" placeholder="Joueur 2" class='input-xlarge' value="Ludovic"/>
      <input type="text" id="rank2" name="rank2" placeholder="Classement 2" class='input-xlarge' value="15/3"/>      
      <ul id="team2_suggestions" data-role="listview" data-inset="true"></ul>
      <input type='hidden' id='team2_id' class='input' value='' />  
      <span class="team2_error label label-info hide"></span>
    </div>
  </div>

  <div class="control-group">
    <label class="control-label" for="city">* Ville</label>
    <div class="controls">
      <input type="text" id="city" name="city" placeholder="Ville" class='input-xlarge' value="Coulogne"/>
      <span class="city_error label label-info hide"></span>
    </div>
  </div>
  
  <hr/>
  
   <div class="control-group">
		<label for="subtype" class="select">Type</label>
		<div class="controls">	
		<select name="subtype" id="subtype">
			<option value="A">A - Normal</option>
			<option value="B">B - Traditionnel (3 sets à 6 jeux pt décisif)</option>
			<option value="C">C - 3 sets à 4 jeux - jeu décisif à 4/4</option>
			<option value="D">D - 3 sets à 4 jeux - jeu décisif à 4/4 pt décisif</option>
			<option value="E">E - 3 sets à 3 jeux - jeu décisif à 2/2</option>
			<option value="F">F - 3 sets à 3 jeux - jeu décisif à 2/2 pt décisif</option>
			<option value="G">G - 3 jeux décisifs</option> 
			<option value="H">H - 3 Sets à 4 jeux - jeu décisif à 3/3 pt décisif</option>
			<option value="I">I - 3 sets à 5 jeux - jeu décisif à 4/4 pt décisif</option>			
		</select>
		</div>
	  </div>  
  
    <div class="control-group">
		<label for="court" class="select">Court</label>
		<div class="controls">			
		<select name="court" id="court">
			<option value="">Selection</option>	
			<option value="1">Terrain 1</option>	
			<option value="2">Terrain 2</option>	
			<option value="3">Terrain 3</option>	
			<option value="4">Terrain 4</option>
			<option value="5">Terrain 5</option>	
			<option value="6">Terrain 6</option>	
			<option value="7">Terrain 7</option>	
			<option value="8">Terrain 8</option>
			<option value="9">Terrain 9</option>	
			<option value="10">Terrain 10</option>	
			<option value="11">Terrain 11</option>
			<option value="">---</option>	
			<option value="A">Terrain A</option>	
			<option value="B">Terrain B</option>	
			<option value="C">Terrain C</option>
			<option value="D">Terrain D</option>	
			<option value="E">Terrain E</option>	
			<option value="F">Terrain F</option>																
		</select>
		</div>
    </div>    
     
  <div class="control-group">
	<label for="tour" class="select">Tour</label>
	<div class="controls">
	<select name="tour" id="tour">
		<option value="">Selection</option>
		<option value="">Poule</option>
		<option value="">Consolante</option>
		<option value="">1er tour</option>
		<option value="">2e tour</option>
		<option value="">3e tour</option>
		<option value="">4e tour</option>
		<option value="">5e tour</option>
		<option value="">6e tour</option>
		<option value="">7e tour</option>
		<option value="">8e tour</option>
		<option value="">9e tour</option>
		<option value="">1/256 finale</option>
		<option value="">1/128 finale</option>
		<option value="">1/64 finale</option>
		<option value="">1/32 finale</option>
		<option value="">1/16 finale</option>
		<option value="">1/8 finale</option>
		<option value="">1/4 finale</option>
		<option value="">1/2 finale</option>
		<option value="">Finale</option>
		<option value="">Journée 1</option>
		<option value="">Journée 2</option>
		<option value="">Journée 3</option>
		<option value="">Journée 4</option>
		<option value="">Journée 5</option>
		<option value="">Journée 6</option>
		<option value="">Journée 7</option>
		<option value="">Journée 8</option>
		<option value="">Journée 9</option>
		<option value="">Journée 10</option>
	</select>
	</div>
  </div>   
	
    <div class="control-group">
		<label for="surface" class="select">Format</label>
		<div class="controls">			
		<select name="surface" id="surface">
			<option value="">Selection</option>	
			<option value="BP">Béton poreux (quick) - BP</option>	
			<option value="EP">Enrobé poreux - EP</option>	
			<option value="EPDM">Granulats caoutchouc - EPDM</option>	
			<option value="GAS">Gazon synthétique - GAS</option>	
			<option value="GAZ">Gazon naturel - GAZ</option>	
			<option value="MOQ">Moquette - MOQ</option>	
			<option value="NVTB">Terre battue non gélive - NVTB</option>	
			<option value="PAR">Parquet (bois) - PAR</option>	
			<option value="RES">Résine (greenset) - RES</option>	
			<option value="TB">Terre-battue - TB</option>
		</select>
		</div>
    </div>   
  
  	<input type="hidden" id="playerid" value="<%= playerid %>" class="input" />
	<input type="hidden" id="token" value="<%= token %>" class="input" />
  
</form>
   
   
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add" class="ui-btn-active ui-state-persist">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="gameEndTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back" >
    Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">
   
<form id="frmEndGame" class="ui-body ui-body-b ui-corner-all">


  <div class="control-group">
    <div class="controls">
      <label>Vous allez terminer la partie.<br/>Souhaitez-vous ajouter une note priv&eacute; ( conseils, astuces ) ?</label>
      <textarea id="privateNote" name="privateNote"></textarea>
      <span class="privateNote_error label label-info hide"></span>
    </div>
  </div>
  
  <div class="control-group">
    <div class="controls">
      <label>Vous pouvez indiquer le message qui sera diffus&eacute; sur FB ?</label>
      <textarea id="fbNote" name="fbNote"></textarea>
      <span class="fbNote_error label label-info hide"></span>
    </div>
  </div>  
   
  
  <div class="control-group">
    <div class="controls">
      <button type="submit" value="Save" class="button">Save</button>
    </div>
  </div>
  
  	<input type="hidden" id="playerid" value="<%= playerid %>" class="input" />
	<input type="hidden" id="token" value="<%= token %>" class="input" />
  
</form>
   
   
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add" class="ui-btn-active ui-state-persist">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="gameListTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
	<a href="#" data-transition="slide" data-reverse="true" data-icon="back">Back</a>
    <h1>zeScore <%= mode %></h1>   
</div><!-- /header -->

<div data-role="content">
    
    <input type="search" name="search" id="search-basic" value="" placeholder="Rechercher par nom, par club"/><br/>
	<br/>
    <ul id="listGamesView" data-role="listview" data-theme="c"></ul>

</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#" class="ui-btn-active ui-state-persist">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="gameListViewTemplate" type="text/template">
<% if(games.length==0) { %>
        <li><p>Aucun resultat <%= query %></p></li>
<% } %> 

<%
    for (var i = 0; i < games.length; i++) {
    	
    	game = games[i];
    
    %>
        <li>
        <a href="#games/<%= game.id %>" data-transition="slide">
        <%= game.location.city %> : <%= game.teams[0].players[0].name %> ( <%= game.teams[0].players[0].rank %> ) vs <%= game.teams[1].players[0].name %> ( <%= game.teams[1].players[0].rank %> )
		<br/>
		Score : <%= game.options.score %>&nbsp;&nbsp;&nbsp;Sets : <%= game.options.sets %>&nbsp;&nbsp;&nbsp;Statut : <%= game.status %>
        </a>
        </li>
    <%
        }
%>
</script>


<script  id="gamePrefTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back" >
    Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">
   
<form id="frmGamePref" class="ui-body ui-body-b ui-corner-all">

     <ul data-role="listview" data-filter="true">
		<li><a href="#games/add?team2=Vincent&id=131313">Vincent Terrasi</a></li>
		<li><a href="#games/add?team2=Ludovic&id=113232132">Ludovic</a></li>			
	</ul>
  
  	<input type='hidden' id='playerid' value='' class='input' />
	<input type='hidden' id='token' value='' class='input' />
  
</form>
   
   
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add" class="ui-btn-active ui-state-persist">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="gameViewCommentListTemplate" type="text/template">

<% if(streams.length==0) { %>
        <div class="message">Aucun commentaire</div>
<% } %> 

<%
  for (var i = 0; i < streams.length; i++) {
    	
    stream = streams[i];
%>
    <div class="message"><%= stream.date %> : <span class="username"><%= (stream.owner || 'Anonymous') %></span> : <%= stream.data.text %></div><br/> 
<%
 }
%>
</script>


<script  id="gameViewScoreBoardTemplate" type="text/template">
<%
team1_set1 = '&nbsp;';
team1_set2 = '&nbsp;';
team1_set3 = '&nbsp;';

team2_set1 = '&nbsp;';
team2_set2 = '&nbsp;';
team2_set3 = '&nbsp;';
set_current = 1;

team1_sets = '0';
team2_sets = '0';

if (game.options.score !== null ) {
	if (game.options.score.indexOf('/')!=-1) { 
		scoreboard = game.options.score.split('/');
		
		team1_sets = scoreboard[0];
		team2_sets = scoreboard[1];		
		
	}
}

if (game.options.sets !== null ) {
	if (game.options.sets.indexOf(';')!=-1) { 
	scoreboard = game.options.sets.split(';');
	
		if (scoreboard.length==2 || scoreboard.length==3) 
		{
			scoreboard1 = scoreboard[0].split('/');
			team1_set1 = scoreboard1[0];
			team2_set1 = scoreboard1[1];
			
			scoreboard2 = scoreboard[1].split('/');
			team1_set2 = scoreboard2[0];
			team2_set2 = scoreboard2[1];
			
			set_current=2;
				
		}
		if (scoreboard.length==3) 
		{
			scoreboard3 = scoreboard[2].split('/');
			team1_set3 = scoreboard3[0];
			team2_set3 = scoreboard3[1];
			
			set_current=3;	
		}
	}
	// 1 set
	else 
	{
			if (game.options.sets.indexOf('/')!=-1) { 
				
				scoreboard1 = game.options.sets.split('/');
				team1_set1 = scoreboard1[0];
				team2_set1 = scoreboard1[1];
				
			}
	
	}
}
%>
   
<div class="ui-body ui-body-a">

	<div class="ui-grid-d">
		<div class="ui-block-a" style="width: 50%;">
			<a href="#players/<%= game.teams[0].players[0].id %>" data-role="text" style="color: yellow">
			<%= game.teams[0].players[0].name %> - <%= game.teams[0].players[0].rank %> 		
			</a> 
			<div id="var_service1"></div>	
		</div>
		<div class="ui-block-b" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team1_sets_div"><%= team1_sets %></div>
		<div class="ui-block-c" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team1_set1_div"><%= team1_set1 %></div>
		<div class="ui-block-d" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team1_set2_div"><%= team1_set2 %></div>
		<div class="ui-block-e" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team1_set3_div"><%= team1_set3 %></div>
	</div>
	<!-- /grid-a -->

	<div class="ui-grid-d">
		<div class="ui-block-a" style="width: 50%;">&nbsp;</div>
		<div class="ui-block-b" style="width: 10%;text-align:center;">
			<font style="white-space: normal; font-size: small">SETS</font>
		</div>
		<div class="ui-block-c" style="width: 10%;text-align:center;">
			<font style="white-space:normal;font-size: small">1</font>
		</div>
		<div class="ui-block-d" style="width: 10%;text-align:center;">
			<font style="width: 10%;white-space:normal;font-size: small">2</font>
		</div>
		<div class="ui-block-e" style="width: 10%;text-align:center;">
			<font style="width: 10%;white-space:normal;font-size: small">3</font>
		</div>
	</div>

	<div class="ui-grid-d">
		<div class="ui-block-a" style="width: 50%;">
			<a href="#players/<%= game.teams[1].players[0].id %>" data-role="text" style="color: yellow">
			<%= game.teams[1].players[0].name %> - <%= game.teams[1].players[0].rank %>		
			</a>
			<div id="var_service2"></div>	
		</div>
		<div class="ui-block-b" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team2_sets_div"><%= team2_sets %></div>
		<div class="ui-block-c" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team2_set1_div"><%= team2_set1 %></div>
		<div class="ui-block-d" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team2_set2_div"><%= team2_set2 %></div>
		<div class="ui-block-e" style="width: 10%;text-align:center;border: 1px solid #FFF" id="team2_set3_div"><%= team2_set3 %></div>
	</div>
	<!-- /grid-a -->
</div>

<%
//if (game.owner === Owner.id) 
//{
%>
<form>
<input type="hidden" id="set_current" value="<%= set_current %>"/>
<input type="hidden" id="gameid" value="<%= game.id %>"/>
<input type="hidden" id="team1_id" value="<%= game.teams[0].players[0].id %>"/>
<input type="hidden" id="team1_points" value="<%= game.teams[0].points %>"/>
<input type="hidden" id="team1_set1" value="<%= team1_set1 %>"/>
<input type="hidden" id="team1_set2" value="<%= team1_set2 %>"/>
<input type="hidden" id="team1_set3" value="<%= team1_set3 %>"/>
<input type="hidden" id="team2_id" value="<%= game.teams[1].players[0].id %>" />
<input type="hidden" id="team2_points" value="<%= game.teams[1].points %>"/>
<input type="hidden" id="team2_set1" value="<%= team2_set1 %>"/>
<input type="hidden" id="team2_set2" value="<%= team2_set2 %>"/>
<input type="hidden" id="team2_set3" value="<%= team2_set3 %>"/>
<!--  BUG je prend owner 993a8c9ab5713eb0ba4e70b1 et token 3135411 de la partie 64ff2998c7520d7ef9cf07d8 -->
<input type="hidden" id="playerid" value="<%= Owner.id %>" />
<input type="hidden" id="token" value="<%= Owner.token %>" />
</form>
<%
//}
%>
</script>


<script  id="gameViewTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back">Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">

<div id="displayViewScoreBoard" data-role="listview"></div>

<%
//if (game.owner === Owner.id) 
//{
%>
<br/><br/>
<form id="frmScore">
<!-- 
<div class="ui-grid-a">
	<div class="ui-block-a">
		<h3 style="margin-top:20px;text-align:right;">Serveur : </h3>
	</div>
	<div class="ui-block-b">
	
		<fieldset data-role="controlgroup" data-type="horizontal">
		        <input type="radio" name="team_selected" id="team1_selected" value="1" />
		        <label for="team1_selected"><%= game.teams[0].players[0].name %></label>
		        <input type="radio" name="team_selected" id="team2_selected" value="2" checked="checked"/>
		        <label for="team2_selected"><%= game.teams[1].players[0].name %></label>
		    </fieldset>
	
	</div>
</div>

<div class="ui-grid-a">
	<div class="ui-block-a"><a data-theme="g" id="setPointWinButton" data-role="button">Serveur Marque</a></div>
	<div class="ui-block-b"><a data-theme="f" id="setPointErrorButton" data-role="button">Serveur Faute</a></div>
</div>
 -->
<div class="ui-grid-a">
	<div class="ui-block-a"><a id="endButton" data-role="button">Terminer</a></div>
	<div class="ui-block-b"><a id="cancelButton" data-role="button">Annuler</a></div>
</div>
<div class="ui-grid-a">
	<div class="ui-block-a">
	
	<%
	if (follow === 'true') 
	{
	%>
	<a data-role="button" id="followButton">Ne plus suivre</a>
	<%
	}
	else {
	%>
	<a data-role="button" id="followButton">Suivre</a>
	<%
	}
	%>
	
	</div>
	<div class="ui-block-b"><a href="http://www.facebook.com/share.php?u=https://apps.facebook.com/447718828610668/game/<%= game.id %>" data-role="button" target="_blank">Partager</a></div>	
</div>
	
</form>
<%
//}
//else {
%>
<br/>
<!-- 

$("#incomingMessages").append(
                   "<div class='message'><span class='username'>" +
                   (message.chatName || 'Anonymous') +
                   "</span> : " +
                   (message.text || ' ') +
                   "</div>"
               );
               $("#incomingMessages").scrollTop(
                   $("#incomingMessages")[0].scrollHeight
               );
 -->

<div id="incomingComment" data-role="listview" class="msgContainerDiv"></div>     
<br/>
 <form id="frmAttachment" class="ui-body ui-body-b">

	<div data-role="fieldcontain">
		<textarea name="messageText" id="messageText" style="width: 95%; height: 50px;"></textarea>
	</div>
	
     <div data-role="fieldcontain">
         <label for="attachment">Attachment:</label>
         <input type="file" name="attachment" id="attachment"/>
     </div>	
	
	<fieldset class="ui-grid-a">
		<div class="ui-block-a">
			<button data-theme="b" id="commentDeleteButton" data-role="button">Effacer</button>
		</div>
		<div class="ui-block-b">
			<!--  
			<button data-theme="b" id="chatSendButton" name="chatSendButton">Envoyer</button>
			-->
     		<input type="submit" value="Envoyer" id="commentSendButton" />
		</div>
	</fieldset>
     
	
     
 </form>  
<%
//}
%>   
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="indexViewTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <h1>zeScore</h1>   
</div><!-- /header -->

<div data-role="content">
    
    <input type="search" name="search" id="search-basic" value="" placeholder="Rechercher par nom, par club"/><br/>
	<br/>
    <ul id="listGamesView" data-role="listview" data-theme="c"></ul>

</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#" class="ui-btn-active ui-state-persist">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="playerFormTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back" >
    Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">
   
<form id="frmAddPlayer" class="ui-body ui-body-b ui-corner-all">

  <span class="success label label-info hide" style="color:red"></span>	

  <div class="control-group">
    <label class="control-label" for="name">Name *</label>
    <div class="controls">
      <input type="text" id="name" name="name" placeholder="Nom Complet" class='input-xlarge' value="<%= name %>"/>
      <span class="name_error label label-info hide"></span>
    </div>
  </div>
  
  <div class="control-group">
    <label class="control-label" for="email">Mail *</label>
    <div class="controls">
      <input type="text" id="email" name="email" placeholder="Mail" class='input-xlarge' value="<%= email %>"/>
      <span class="email_error label label-info hide"></span>
    </div>
  </div>
  
  
  <div class="control-group">
    <label class="control-label" for="password">Password *</label>
    <div class="controls">
      <input type="text" id="password" name="password" placeholder="Password" class='input-xlarge' value="<%= password %>"/>
      <span class="password_error label label-info hide"></span>
    </div>
  </div>       
  
  
  <div class="control-group">
    <div class="controls">
      <button value="Save" class="button">Save</button>
    </div>
  </div>
  
  
  <hr/> 
  <div class="control-group">
    <label class="control-label" for="info">Les options suivantes ne sont pas obligatoires</label>
  </div>

  
  <div class="control-group">
    <label class="control-label" for="nickname">Nickname</label>
    <div class="controls">
      <input type="text" id="nickname" name="nickname" placeholder="Pseudo" class='input-xlarge' value="<%= nickname %>"/>
      <span class="nickname_error label label-info hide"></span>
    </div>
  </div>



  <div class="control-group">
    <label class="control-label" for="rank">Rank</label>
    <div class="controls">
      <input type="text" id="rank" name="rank" placeholder="Classement" class='input-xlarge' value="<%= rank %>"/>
      <span class="rank_error label label-info hide"></span>
    </div>
  </div>
  
 
  
  <div class="control-group">
    <label class="control-label" for="idlicense">ID de la licence</label>
    <div class="controls">
      <input type="text" id="idlicense" name="idlicense" placeholder="Identifiant de la licence" class='input-xlarge' value="<%= idlicense %>"/>
      <span class="idlicense_error label label-info hide"></span>
    </div>
  </div>    
  
  	<!-- FIXME: Find club_id in Ajax -->
  <div class="control-group">
    <label class="control-label" for="club">Club</label>
    <div class="controls">
      <input type="text" id="club" name="club" placeholder="Nom du Club" class='input-xlarge' value="<%= club %>"/>
      <ul id="suggestions" data-role="listview" data-inset="true"></ul>
      <span class="club_error label label-info hide"></span>
    </div>
  </div>  

  <div class="control-group">
    <label class="control-label" for="clubid">ID du Club</label>
    <div class="controls">
      <input type="text" id="clubid" name="clubid" placeholder="Identifiant du Club" class='input-xlarge' value="<%= idclub %>"/>
      <span class="clubid_error label label-info hide"></span>
    </div>
  </div>      
      

  
  	<input type="hidden" id="playerid" value="<%= playerid %>" class="input" />
	<input type="hidden" id="token" value="<%= token %>" class="input" />
  
</form>
   
   
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add" class="ui-btn-active ui-state-persist">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="playerListAutoCompleteViewTemplate" type="text/template">
<% if(players.length==0) { %>
        <li><p>Aucun resultat pour <%= query %></p></li>
<% } %> 

<%

    for (var i = 0; i < players.length; i++) {
    	
    	player = players[i];
    
    %>
        
        <li title="<% if (player!==undefined) print(player.id); %>">
        
       <fieldset data-role="controlgroup" data-type="horizontal">
       <input type="checkbox" name="team<%= select %>_choice" value="<% if (player!==undefined) print(player.id); %>" id="team<%= select %>_choice" class="custom" />
       <label for="team<%= select %>_name"><% if (player!==undefined) print(player.name); %></label>
       <label for="team<%= select %>_rank"><% if (player!==undefined) print(player.rank); %></label>
       <label for="team<%= select %>_club"><% if (player!==undefined) if (player.club!==undefined) print(player.club.name); %></label> 
       </fieldset>
      
        </li>
    <%
    	if (i>5) break;
    
        }
        
        if (players.length>5) {
     %>
      <li>
     	... ( <%= players.length %> resultats)
        </li>
     <%   
        }
%>
</script>


<script  id="playerListViewTemplate" type="text/template">
<% if(players.length==0) { %>
        <li><p>Aucun resultat pour <%= query %></p></li>
<% } %> 

<%
    for (var i = 0; i < players.length; i++) {
    	
    	player = players[i];
    
    %>
        <li>
        <a href="#players/<%= player.id %>" data-transition="slide">
        <%= player.name %> : <%= player.rank %> : <%= player.nickname %> : <%= player.club.name %>
		<br/>
        </a>
        </li>
    <%
        }
%>
</script>


<script  id="playerSearchTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <h1>zeScore</h1>   
</div><!-- /header -->

<div data-role="content">
    
    <input type="search" name="search" id="search-basic" value="" placeholder="Rechercher par nom, par club, par pseudo"/><br/>
	<br/>
    <ul id="listPlayersView" data-role="listview" data-theme="c"></ul>

</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="playerSigninTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back" >
    Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">
   
<form id="frmSigninPlayer" class="ui-body ui-body-b ui-corner-all">

  <span class="success label label-info hide" style="color:red"></span>	

  <div class="control-group">
    <label class="control-label" for="pseudo">Email</label>
    <div class="controls">
      <input type="text" id="email" name="email" placeholder="Email" class='input-xlarge' value=""/>
      <span class="email_error label label-info hide"></span>
    </div>
  </div>
  
  <div class="control-group">
    <label class="control-label" for="password">Mot de passe</label>
    <div class="controls">
      <input type="text" id="password" name="password" placeholder="Mot de passe" class='input-xlarge' value=""/>
      <span class="password_error label label-info hide"></span>
    </div>
  </div>
  
  <div class="control-group">
    <div class="controls">
      <button type="submit" value="Save" class="button">Connecter</button>
    </div>
  </div>
  
  
</form>

<hr/>

<div align="center"><a href="#players/form" data-role="button">S'enregistrer</a></div>
   
   
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account"  class="ui-btn-active ui-state-persist">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>


<script  id="playerViewTemplate" type="text/template">
<div data-role="header" data-theme="b" data-position="fixed">
    <a href="#" data-transition="slide" data-reverse="true" data-icon="back">Back</a>
    <h1>zeScore</h1>
</div><!-- /header -->

<div data-role="content">

<span class="success label label-info hide" style="color:red"></span>	

<h3><%= player.name %> alias <%= player.nickname %></h3>

Club : <%= player.club.name %> <a href="#clubs/<%= player.club.id %>">Plus d'infos</a><br/>
Classement : <%= player.rank %><br/>

<%
if (follow === 'true') 
{
%>
<a data-role="button" id="followButton">Ne plus suivre ce joueur</a>
<%
}
else {
%>
<a data-role="button" id="followButton">Suivre ce joueur</a>
<%
}
%>
</div><!-- /content -->

<div data-role="footer" data-theme="b" data-position="fixed">
   <div data-role="navbar">
	<ul>
		<li><a href="#">Suivre</a></li>
		<li><a href="#games/add">Diffuser</a></li>
		<li><a href="#account">Mon Compte</a></li>
	</ul>				
	</div><!-- /navbar -->
</div>
</script>

<!-- TEMPLATE END -->



  <script type="text/javascript" charset="utf-8">
  document.addEventListener("deviceready", onDeviceReady, false);
  function onDeviceReady() {
      /*navigator.splashscreen.hide();*/
      navigator.geolocation.getCurrentPosition(onGeoSuccess, onGeoError);
      checkConnection();
      
      //phone init code that manipulates the DOM...
      //$.mobile.initializePage();
  }
  
  function onGeoSuccess(position) {
  
   	appConfig.latitude = position.coords.latitude;
    appConfig.longitude = position.coords.longitude;
    
    console.log('GeoSuccess',appConfig);
  
  }
  
  function onGeoError(position) {
  	console.log('GeoError');
  	
  	
  }    
  
  // alert dialog dismissed
  function alertDismissed() {
      // do something
  }

  // Show a custom alert
  //
  function showAlert() {
      navigator.notification.alert(
          'You are the winner!',  // message
          alertDismissed,         // callback
          'Game Over',            // title
          'Done'                  // buttonName
      );
  }
  

  function checkConnection() {
  

      var networkState = navigator.connection.type;

      if (networkState==='none') 
      	appConfig.networkState='false';
      else 
      	appConfig.networkState='true';
   

  }
  
  </script>  
</body>
</html>
